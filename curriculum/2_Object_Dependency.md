## オブジェクト（Object）

Object は class と同じではない。では、オブジェクトとは何か？

クラスはオブジェクトを作り出すために必要な青写真であり、設計図に近い。<br/>
クラス・インスタンス（Object）は抽象的なものの具現、すなわちクラスによって具体化されたものを指す。

Java におけるオブジェクトは **クラスのインスタンス** または **配列（Array）** である（技術的な回答）。<br/>

## 依存関係（Dependency）
> A -> B に依存する

依存関係には 2 つの観点がある
- クラス（コード）間の依存関係
  - クライアント・クラスのコードは、サプライヤ・クラスのコードが存在してこそ正しく動作する
  - Supplier が変わると Client も影響を受ける
  - 例）ローカル変数、インスタンス変数、戻り値の型
    <br/><br/>

- オブジェクト間の依存関係
  - 実際にプログラムを実行するランタイム環境で依存関係が形成される
  - クラスレベルの依存関係とランタイムレベルの依存関係は異なる場合がある
    - ランタイム環境ではオブジェクトがオブジェクトに依存する関係になる
    - **オブジェクト・ダイアグラム**、ランタイムにどのクラスのオブジェクトを使うかを決める部分が必要

## 関心の分離（SoC, Separation of Concerns）
- Concerns とはプログラムで扱う問題領域のこと
- 関心の分離は、異なる関心を持つ部分を切り分けること
- 変更の理由／タイミングが異なるなら、異なる関心として分離するのがよい

- 継承による拡張
  - abstract method を用いた抽象化
  - 上位／下位クラスが強く結び付き、結合度が高い
  
- インターフェースを用いた抽象化（クラスの分離）
  - インターフェースを用いて実装と分離
  - 実装が変わってもクライアントに影響がない。結合度が低い

### 1) 関係設定の責務の分離

インターフェースを実装したクラスのうち、どれを使用するのか？<br/>
それを決定するコードはどこかに存在しなければならない。例）コンストラクタによる注入

このような状況を関係設定の責務という。<br/>
**責務がどこにあるかによって、コードレベルの依存関係が変わる。**

## オブジェクト指向の設計原則とパターン
- OCP（Open-Closed Principle, 開放・閉鎖の原則）
  - クラスやモジュールは拡張には開かれており、変更には閉じていなければならない。
  - あるクラスの機能を拡張する際、既存コードを変更せずに拡張できるべきである。
    - インターフェース、抽象クラスによる抽象化、多態性の活用 → **ストラテジ・パターン**で多用される
    - 例）PaymentService -> 為替レート取得方法の拡張

- DIP（Dependency Inversion Principle, 依存性逆転の原則）
  - 高水準モジュールは低水準モジュールに依存してはならない。両者は抽象に依存すべきである。
  - 抽象は具象に依存してはならない。具象は抽象に依存すべきである。
  - パッケージングの活用 → すなわちインターフェースの所有権の逆転が必要
    - 例）Separate Interface パターン
    

## 凝集度と結合度
- 凝集度（Cohesion）
  - 1 つのモジュールが 1 つの責務または関心に集中している程度
  - すなわち、変更が発生したときの変更コストが小さい
    - 凝集度が高い = 1 つのモジュールが 1 つの機能に集中
    - 凝集度が低い = 1 つのモジュールが複数の機能を持つ

- 結合度（Coupling）
  - モジュール間の相互依存の程度
  - すなわち、変更が発生したときの変更コストが大きい
  - 結合度が高い = モジュール間の依存が多い
  - 結合度が低い = モジュール間の依存が少ない

## ストラテジ・パターン（Strategy Pattern）
- 振る舞いをカプセル化し、ランタイムに動的に振る舞いを切り替えられるようにするパターン
- 自身の機能コンテキスト（context）において、変更が必要なアルゴリズムをインターフェースを通じて丸ごと外部に分離し、それを実装した具体的なアルゴリズム・クラスを必要に応じて差し替えて使えるようにするパターン

## デコレータ・パターン（Decorator Pattern）
- オブジェクトに追加機能を動的に付与できるようにするパターン

## 制御の反転（IoC, Inversion of Control）
- 制御の反転とは、オブジェクトの生成と依存性管理をフレームワークが担うこと

## Spring コンテナと依存関係注入
> Spring の技術的定義、IoC / DI コンテナ
- Spring コンテナ
  - Spring Framework の中核機能の 1 つで、オブジェクトの生成、管理、依存性注入などを担うコンポーネント
  - BeanFactory：Spring コンテナの基本機能を提供するインターフェース
    - コンポーネントをシングルトンとして生成し、Singleton Registry で管理して再利用性を高める
    

- 依存関係注入（Dependency Injection, DI）
  - 依存関係注入は、オブジェクトが必要とする依存性を外部から注入する設計パターン
  - 依存関係注入の主な方式
    - コンストラクタ注入（Constructor Injection）
    - セッター注入（Setter Injection）
    - フィールド注入（Field Injection）